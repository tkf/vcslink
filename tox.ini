[tox]
envlist = py, style, type

# for `requires`:
minversion = 3.2.0

requires =
    setuptools >= 41.0

[testenv]
deps =
    pytest
    pytest-cov
    coverage
commands =
    py.test \
        --pyargs vcslink \
        {posargs}

[pytest]
addopts =
    --doctest-modules

norecursedirs =
    .*

[coverage:paths]
source =
    src/vcslink
    .tox/*/lib/python*/site-packages/vcslink
# https://coverage.readthedocs.io/en/coverage-4.5.1/config.html#paths

[testenv:style]
deps =
    black == 19.3b0
    isort == 4.3.17
commands =
    isort --recursive --check-only .
    black --check --diff .

[testenv:type]
deps =
    mypy
commands =
    mypy {posargs:-p vcslink}
setenv =
    MYPYPATH = {toxinidir}/src
